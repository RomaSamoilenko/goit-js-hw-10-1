{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Описаний в документації\nimport flatpickr from \"flatpickr\";\n// Додатковий імпорт стилів\nimport \"flatpickr/dist/flatpickr.min.css\";\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// пошук елементів\nconst text = document.querySelector('#datetime-picker');\nconst timerHtml = document.querySelector('.timer');\nconst btnStart = document.querySelector('button[data-start]');\nconst seconds = document.querySelector('span[data-seconds]');\nconst minutes = document.querySelector('span[data-minutes]');\nconst hours = document.querySelector('span[data-hours]');\nconst days = document.querySelector('span[data-days]');\n\nbtnStart.disabled = true; // початковий стан кнопки: вимкнена\n\n// об'єкт параметрів\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) { // виклик щоразу під час закриття елемента інтерфейсу\n\n    // перевірка на вибір майбутньої дати, а не минулої\n    if (selectedDates[0] < new Date()) {\n\n      // відображення повідомленя користувачеві з бібліотеки Notiflix\n      iziToast.warning({\n        title: 'Caution',\n        message: 'Please choose a date in the future',\n    });\n      btnStart.disabled = true; // деактивація кнопки СТАРТ\n    } else {\n      // якщо обрана майбутня дата - то активувати кнопку СТАРТ\n      btnStart.disabled = false;\n    }\n  },\n};\n\n// виклик функції для кросбраузерного вибору кінцевої дати та часу\nflatpickr(text, options);\n\n// Функція для підрахунку значень\nfunction convertMs(ms) { // ms - різниця між кінцевою і поточною датою в мілісекундах\n\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\n// функція яка форматує значення (додає 0, якщо в числі менше двох символів)\nfunction addLeadingZero(value) {\n\n  // приведення до строки та додавання нуля\n  return value.toString().padStart(2, '0');\n}\n\n// додаємо слухача події до кнопки СТАРТ\nbtnStart.addEventListener('click', () => {\n\n  // додаємо таймер при кліку\n  let timer = setInterval(() => {\n\n    // Зворотній відлік.\n    // Віднімання між кінцевою і поточною датою.\n    let countdown = new Date(text.value) - new Date();\n\n    btnStart.disabled = true; // деактивація кнопки СТАРТ\n\n    // перевірка на звортній відлік\n    if (countdown >= 0) {\n      // конвертація значень\n      let timeObject = convertMs(countdown);\n\n      // додаємо 0, якщо в числі менше двох символів\n      days.textContent = addLeadingZero(timeObject.days);\n      hours.textContent = addLeadingZero(timeObject.hours);\n      minutes.textContent = addLeadingZero(timeObject.minutes);\n      seconds.textContent = addLeadingZero(timeObject.seconds);\n\n      // якщо зоротній відлік меньше-рвіне 10 секунд\n      if (countdown <= 10000) {\n        timerHtml.style.color = 'red'; // зафарбувати текст в червоний\n      }\n    } else {\n      // відображення повідомленя користувачеві з бібліотеки Notiflix\n      Notiflix.Notify.success('Countdown finished');\n      timerHtml.style.color = 'black'; // зафарбувати текст в чорний\n      clearInterval(timer); // очистити таймер\n    }\n  }, 1000); // обчислювати раз на секунду, скільки часу залишилось до вказаної дати\n});"],"names":["text","timerHtml","btnStart","seconds","minutes","hours","days","options","selectedDates","iziToast","flatpickr","convertMs","ms","addLeadingZero","value","timer","countdown","timeObject"],"mappings":"2FAUA,MAAMA,EAAO,SAAS,cAAc,kBAAkB,EAChDC,EAAY,SAAS,cAAc,QAAQ,EAC3CC,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAU,SAAS,cAAc,oBAAoB,EACrDC,EAAU,SAAS,cAAc,oBAAoB,EACrDC,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAO,SAAS,cAAc,iBAAiB,EAErDJ,EAAS,SAAW,GAGpB,MAAMK,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAGjBA,EAAc,CAAC,EAAI,IAAI,MAGzBC,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,oCACjB,CAAK,EACCP,EAAS,SAAW,IAGpBA,EAAS,SAAW,EAEvB,CACH,EAGAQ,EAAUV,EAAMO,CAAO,EAGvB,SAASI,EAAUC,EAAI,CASrB,MAAMN,EAAO,KAAK,MAAMM,EAAK,KAAG,EAE1BP,EAAQ,KAAK,MAAOO,EAAK,MAAO,IAAI,EAEpCR,EAAU,KAAK,MAAQQ,EAAK,MAAO,KAAQ,GAAM,EAEjDT,EAAU,KAAK,MAASS,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAN,EAAM,MAAAD,EAAO,QAAAD,EAAS,QAAAD,CAAO,CACxC,CAGA,SAASU,EAAeC,EAAO,CAG7B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CACzC,CAGAZ,EAAS,iBAAiB,QAAS,IAAM,CAGvC,IAAIa,EAAQ,YAAY,IAAM,CAI5B,IAAIC,EAAY,IAAI,KAAKhB,EAAK,KAAK,EAAI,IAAI,KAK3C,GAHAE,EAAS,SAAW,GAGhBc,GAAa,EAAG,CAElB,IAAIC,EAAaN,EAAUK,CAAS,EAGpCV,EAAK,YAAcO,EAAeI,EAAW,IAAI,EACjDZ,EAAM,YAAcQ,EAAeI,EAAW,KAAK,EACnDb,EAAQ,YAAcS,EAAeI,EAAW,OAAO,EACvDd,EAAQ,YAAcU,EAAeI,EAAW,OAAO,EAGnDD,GAAa,MACff,EAAU,MAAM,MAAQ,MAEhC,MAEM,SAAS,OAAO,QAAQ,oBAAoB,EAC5CA,EAAU,MAAM,MAAQ,QACxB,cAAcc,CAAK,CAEtB,EAAE,GAAI,CACT,CAAC"}